# Domibus Configuration for OOTS E2E Testing
# See: https://ec.europa.eu/digital-building-blocks/wikis/display/DIGITAL/Domibus

# =============================================================================
# Database Configuration (for tanzari/domibus image)
# =============================================================================
domibus.database.serverName=mysql-blue
domibus.database.port=3306
domibus.database.schema=domibus
# domibus.database.general.schema - commenting out to disable multi-tenancy
domibus.datasource.user=edelivery
domibus.datasource.password=edelivery
domibus.entityManagerFactory.jpaProperty.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
domibus.entityManagerFactory.jpaProperty.hibernate.hbm2ddl.auto=update

# =============================================================================
# MSH (Message Service Handler) Configuration
# =============================================================================
# MSH endpoint
domibus.msh.endpoint=http://domibus-blue:8080/domibus/services/msh

# =============================================================================
# Security Configuration
# =============================================================================
# Keystore
domibus.security.keystore.type=pkcs12
domibus.security.keystore.location=${domibus.config.location}/keystores/gateway_keystore.p12
domibus.security.keystore.password=test123

# Truststore
domibus.security.truststore.type=pkcs12
domibus.security.truststore.location=${domibus.config.location}/keystores/gateway_truststore.p12
domibus.security.truststore.password=test123

# ------------- Private Key Configuration ------------------
# Single alias (for single tenant mode)
domibus.security.key.private.alias=blue_gw
domibus.security.key.private.password=test123

# =============================================================================
# Plugin Configuration
# =============================================================================
# Enable WS Plugin (required for SOAP interface)
domibus.plugin.ws.enabled=true
domibus.plugin.ws.mtom.enabled=true

# =============================================================================
# Messaging Configuration
# =============================================================================
# Pull interval (seconds)
domibus.msh.pull.cron=0/10 * * * * ?

# Message retention (minutes)
domibus.retentionWorker.message.retention.downloaded.max.delete=50
domibus.retentionWorker.message.retention.not_downloaded.max.delete=50

# =============================================================================
# Logging
# =============================================================================
domibus.logging.payload.print=true
domibus.logging.ebms3.error.print=true
domibus.logging.cxf.limit=100000

# =============================================================================
# Multi-tenancy (disabled for single-tenant mode)
# =============================================================================
# NOTE: Do not set domibus.database.general.schema to enable single-tenant mode

# =============================================================================
# JMS/ActiveMQ Configuration
# =============================================================================
# External ActiveMQ broker connection
activeMQ.broker.host=activemq-blue
activeMQ.brokerName=activemq-blue
activeMQ.transportConnector.uri=tcp://activemq-blue:61616
activeMQ.username=admin
activeMQ.password=admin

# =============================================================================
# Admin Console
# =============================================================================
domibus.ui.title.name=OOTS E2E Blue Gateway
domibus.ui.support.team.name=OOTS Testing Team
